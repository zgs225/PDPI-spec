# 💬 SDD 提示词模板库

这是一个精心设计的提示词模板集合，帮助你更高效地与 SDD AI Agent 协作。

---

## 📑 目录

- [通用提示词](#通用提示词)
- [阶段切换提示词](#阶段切换提示词)
- [异常处理提示词](#异常处理提示词)
- [高级操作提示词](#高级操作提示词)
- [反模式示例](#反模式示例)

---

## 通用提示词

### 🔍 查询状态

```
# 最简洁
状态

# 详细版
查看当前模块的详细状态

# 多模块
列出所有模块的状态
```

**AI 预期响应**：
```
📍 模块：user-authentication
🔄 当前阶段：DESIGN
➡️ 下一步：定义数据库 schema
📅 最后更新：2025-12-18
```

---

### 🆕 启动新功能

```
# 模板 1: 最简洁（推荐）
我要添加 [功能名称]

# 模板 2: 带目标
我要添加 [功能名称]
目标：[一句话描述]

# 模板 3: 带上下文
我要添加 [功能名称]
目标：[描述]
参考：项目中已有 [类似功能]

# 模板 4: 带约束
我要添加 [功能名称]
约束：
- 不能使用 [某技术]
- 必须兼容 [某版本]
- 上线时间：[日期]
```

**示例**：
```
✅ 我要添加用户登录功能

✅ 我要添加支付集成
   目标：支持支付宝和微信支付

✅ 我要添加文件上传
   参考：项目中已有图片上传功能

✅ 我要添加实时通知
   约束：
   - 不能使用 WebSocket（防火墙限制）
   - 必须支持 IE11
```

---

### 🔄 恢复会话

```
# 最简洁
继续

# 明确继续某个模块
继续 [模块名称]

# 从中断点恢复
我昨天做到 [阶段]，继续

# 询问下一步
下一步做什么？
```

---

### ⏸️ 暂停与保存

```
# 保存当前进度
保存当前状态

# 暂停并说明原因
暂停，等待 [某人] 的反馈

# 设置提醒
暂停，提醒我 [明天/下周] 继续
```

---

## 阶段切换提示词

### Phase 0: PREWORK → REQUIREMENTS

```
# 标准流程
是
继续

# 跳过（不推荐）
跳过 PREWORK，我已经了解项目

# 补充上下文
继续，但请注意 [特殊约束]
```

---

### Phase 1: REQUIREMENTS

```
# 让 AI 主导（推荐）
开始写需求
继续 REQUIREMENTS

# 提供核心场景
需求重点：
1. [场景 1]
2. [场景 2]
3. [场景 3]

# 明确不做什么
这个功能不包括：
- [范围外的事项 1]
- [范围外的事项 2]

# 分阶段迭代
这次只做 MVP，以下是核心功能：
- [核心 1]
- [核心 2]
后续迭代：[高级功能]

# 参考已有规格
参考 [其他模块] 的需求文档格式
```

**示例**：
```
✅ 需求重点：
   1. 用户可以通过邮箱注册
   2. 注册后需要邮件验证
   3. 密码必须符合强度要求

✅ 这个功能不包括：
   - 社交账号登录（下个版本）
   - 双因素认证（下个版本）

✅ 这次只做 MVP，核心功能：
   - 基本的邮箱/密码注册
   - 简单的邮件验证
   后续迭代：OAuth、SSO
```

---

### Phase 2: DESIGN

```
# 标准流程
继续 DESIGN
开始设计

# 指定技术栈
DESIGN 阶段，技术选型：
- 数据库：[PostgreSQL/MySQL/...]
- 缓存：[Redis/Memcached/...]
- 消息队列：[RabbitMQ/Kafka/...]

# 有架构偏好
设计时请考虑：
- 使用微服务架构
- API 采用 GraphQL
- 事件驱动设计

# 讨论架构决策
在确定 [具体技术] 前，我想讨论一下 [问题]

# 参考现有设计
参考 [现有模块] 的设计模式
```

**示例**：
```
✅ DESIGN 阶段，技术选型：
   - 数据库：PostgreSQL（已有实例）
   - 密码加密：argon2（而非 bcrypt）
   - 邮件服务：SendGrid

✅ 设计时请考虑：
   - 未来可能迁移到微服务
   - API 需要支持 RESTful 和 GraphQL 两种方式

✅ 在确定缓存方案前，我想讨论一下验证码存储的最佳实践
```

---

### Phase 3: PLAN

```
# 标准流程
继续 PLAN
制定实施计划

# 指定约束
PLAN 阶段，注意：
- 我们没有测试环境，需要 feature flag
- 数据库迁移必须可回滚
- 每天只能部署一次

# 指定优先级
计划时优先：
1. [最重要的部分]
2. [次重要的部分]
其他可以后续迭代

# 分批实施
计划分 [N] 个批次，每批可独立上线

# 估算工作量
制定计划，并估算每个步骤的时间
```

**示例**：
```
✅ PLAN 阶段，注意：
   - 数据库迁移需要 DBA 审批，留足时间
   - 每周五禁止部署
   - 性能测试需要申请测试环境

✅ 计划时优先：
   1. 核心注册流程（必须在这个 Sprint 完成）
   2. 邮件验证（可以下个 Sprint）
   3. 密码找回（优先级最低）

✅ 计划分 3 个批次，每批可独立上线：
   - 批次1：数据层和 API
   - 批次2：前端页面
   - 批次3：邮件通知
```

---

### Phase 4: IMPLEMENTATION

```
# 标准流程
开始实现
执行计划

# 从特定步骤开始
从步骤 [X.X] 开始执行

# 跳过已完成步骤
步骤 1.1 到 1.3 我已经做了，从 1.4 开始

# 暂停在某个步骤
执行到步骤 [X.X] 后暂停

# 只执行某个里程碑
只执行 Milestone [N]

# 遇到错误
步骤 [X.X] 失败了，帮我看看
步骤 [X.X] 的验证命令报错：[错误信息]
```

**示例**：
```
✅ 步骤 2.3 到 2.5 我已经做了，从 2.6 开始

✅ 只执行 Milestone 1（数据层），其他明天做

✅ 步骤 3.2 失败了，错误信息：
   TypeError: Cannot read property 'email' of undefined
   帮我检查一下问题

✅ 执行到步骤 4.5 后暂停，我需要先部署数据库
```

---

### Phase 5: ACCEPTANCE

```
# 标准流程
开始验收测试
进行 demo

# 手动测试配合
我已经手动测试了场景 [1, 2]，请验证场景 [3, 4, 5]

# 特定场景测试
重点测试 [某个 Gherkin 场景]

# 发现问题
验收时发现问题：[描述]

# 部分通过
场景 [X] 通过了，但场景 [Y] 有问题
```

**示例**：
```
✅ 我已经手动测试了场景 1、2、3，请验证场景 4 和 5

✅ 重点测试密码强度校验的边界情况

✅ 验收时发现问题：
   - 邮件发送延迟超过 10 秒
   - 密码错误提示不够友好

✅ 场景 1-3 通过了，但场景 4（密码找回）有问题：
   验证码过期时间不正确
```

---

## 异常处理提示词

### 🐛 实施阶段遇到问题

```
# 验证失败
步骤 [X.X] 验证失败：[错误信息]

# 卡住了
在步骤 [X.X] 卡住了，尝试了 [N] 次还是失败

# 计划有问题
我觉得步骤 [X.X] 的做法不对，应该 [建议]

# 需要外部帮助
步骤 [X.X] 需要 [某人/某团队] 的支持，暂时跳过

# 环境问题
本地环境有问题：[描述]
能否调整计划？
```

**示例**：
```
✅ 步骤 2.3 验证失败：
   npm run test:unit -- user.model.test.ts
   Error: Email validation regex is incorrect

✅ 在步骤 3.5 卡住了，尝试了 5 次还是失败
   问题：Docker 容器无法连接数据库

✅ 我觉得步骤 4.2 的做法不对
   应该先清理缓存再更新数据库
   创建 Deviation Report

✅ 步骤 5.1 需要 DBA 创建生产数据库用户
   暂时跳过，用测试库继续后续步骤
```

---

### 🔄 需求变更

```
# 小调整
我想微调一下 [某个细节]

# 重大变更
需要修改需求：[描述]

# 延期处理
这个变更先记录下来，功能完成后再做

# 创建新版本
创建 [模块名称-v2] 来实现新需求
```

**示例**：
```
✅ 我想微调一下密码强度规则：
   从"至少 8 位"改为"至少 10 位"
   （如果是 REQUIREMENTS 阶段，直接修改）
   （如果是 IMPLEMENTATION 阶段，创建 Change Request）

✅ 需要修改需求：
   不再使用邮件验证，改为手机短信验证
   这是重大变更

✅ 这个变更先记录下来（添加找回密码功能）
   等当前功能完成后再做

✅ 当前版本保持简单，创建 user-auth-v2 来实现 OAuth
```

---

### ⚠️ 计划偏差

```
# 主动报告偏差
我在实施时发现 [问题]，计划需要调整

# 询问如何处理
步骤 [X.X] 实际情况和计划不符：[描述]
如何处理？

# 请求审批偏差
创建 Deviation Report：[原因]

# 回滚到设计阶段
这个设计有缺陷，需要回到 DESIGN 阶段重新设计
```

**示例**：
```
✅ 我在实施时发现数据库字段定义有误
   email 应该是唯一索引，但 design.md 中没提到

✅ 步骤 3.2 实际情况和计划不符：
   第三方 API 响应格式变了
   如何处理？

✅ 创建 Deviation Report：
   原计划使用同步邮件发送
   但实测发现会阻塞请求超过 5 秒
   建议改为异步队列

✅ 这个设计有缺陷：
   没有考虑并发注册的竞态条件
   需要回到 DESIGN 阶段重新设计事务处理
```

---

### 🔙 回退到上一阶段

```
# 标准回退
回退到 [阶段名称]

# 说明原因
回退到 [阶段名称]，因为 [原因]

# 部分重做
保留 [某些内容]，重做 [某部分]

# 从某个检查点恢复
恢复到 Milestone [N] 的状态
```

**示例**：
```
✅ 回退到 DESIGN，因为发现性能瓶颈

✅ 保留 requirements.md，重做 design.md 中的 API 设计部分

✅ 恢复到 Milestone 2 的状态，Milestone 3 有问题
```

---

## 高级操作提示词

### 🔀 多模块管理

```
# 切换模块
切换到 [模块名称]

# 查看所有模块
列出所有模块

# 模块间依赖
[模块 A] 依赖 [模块 B]，请先完成 B

# 并行开发
同时启动 [模块 A] 和 [模块 B]
```

**示例**：
```
✅ 切换到 payment-integration

✅ 列出所有模块的状态和进度

✅ user-profile 依赖 user-authentication，请先完成认证模块

✅ 同时启动 frontend-redesign 和 api-optimization
   （它们互不依赖）
```

---

### 📊 报告生成

```
# 进度报告
生成本周进度报告

# 风险评估
评估当前风险和阻塞项

# 时间估算
估算剩余工作量

# 交付清单
生成交付文档清单
```

---

### 🔧 自定义配置

```
# 修改 QA 标准
在 [阶段] 的 QA 中增加：[检查项]

# 调整步骤粒度
PLAN 阶段把步骤拆得更细，每步不超过 15 分钟

# 自定义验证命令
将验证命令改为：[自定义命令]

# 启用/禁用规则
临时禁用"绿到绿"规则（测试环境不可用）
```

**示例**：
```
✅ 在 DESIGN 的 QA 中增加：
   - [ ] 性能负载测试计划已定义
   - [ ] 安全威胁建模已完成

✅ PLAN 阶段把步骤拆得更细
   每步不超过 15 分钟
   （适合新手或高风险项目）

✅ 将验证命令改为：
   npm run test:ci（而非 npm test）

✅ 临时禁用"绿到绿"规则
   原因：CI 环境维护中，无法运行测试
   风险：我会在本地手动验证
```

---

### 🧪 测试与调试

```
# 触发特定测试
运行 [测试类型] 测试

# 调试步骤
详细解释步骤 [X.X] 的执行过程

# 模拟执行
模拟执行步骤 [X.X]，不实际修改文件

# 验证配置
验证 [配置文件] 是否正确
```

---

## 反模式示例

### ❌ 错误提示词及其问题

```
❌ "直接帮我实现登录功能"
问题：跳过 PREWORK、REQUIREMENTS、DESIGN、PLAN
正确：我要添加登录功能

❌ "跳过测试，直接下一步"
问题：违反"验证优先"原则
正确：步骤 X.X 的测试失败了，帮我修复

❌ "requirements.md 太啰嗦，简化一下"
问题：降低规格质量
正确：requirements.md 的场景 3 和 4 可以合并吗？

❌ "这个 QA 检查太严格，忽略吧"
问题：绕过质量门控
正确：QA 检查项 [X] 不适用我们的项目，能否替换为 [Y]？

❌ "把所有步骤一次性做完"
问题：违反"原子步骤"和"Stop-and-Fix"原则
正确：开始实现（AI 会逐步执行）

❌ "我觉得这个设计不好，重新做"（在 IMPLEMENTATION 阶段）
问题：阶段错误
正确：创建 Deviation Report，或回退到 DESIGN 阶段

❌ "顺便也把 [无关功能] 做了"
问题：范围蔓延
正确：当前功能完成后，创建新模块 [新功能名称]

❌ "不要问我，你决定就好"（在关键架构决策时）
问题：AI 无法替代人类决策
正确：提供明确的偏好或约束，让 AI 在边界内决策
```

---

## 🎯 提示词优化技巧

### 1. 明确意图

```
❌ "继续"（太模糊）
✅ "继续执行 IMPLEMENTATION 的步骤 3.2"

❌ "有问题"
✅ "步骤 2.3 的验证命令返回错误：[粘贴错误信息]"
```

---

### 2. 提供上下文

```
❌ "改成用 Redis"
✅ "DESIGN 阶段，将 session 存储从内存改为 Redis，因为需要支持多实例部署"

❌ "这个不行"
✅ "步骤 4.2 的方案不行，会导致数据库死锁，建议使用乐观锁"
```

---

### 3. 分步骤沟通

```
❌ "做用户管理，要增删改查，还要权限控制，分角色，管理员能做所有事，普通用户只能改自己的..."
（信息过载）

✅ 分步骤：
   1. "我要添加用户管理功能"（启动 PREWORK）
   2. 进入 REQUIREMENTS 后再详细说明各角色权限
```

---

### 4. 使用清单格式

```
❌ "技术栈是 React 和 Node.js，数据库用 PostgreSQL，还有 Redis 缓存，用 Docker 部署..."

✅ 清单格式：
   技术栈：
   - 前端：React 18 + TypeScript
   - 后端：Node.js 20 + Express
   - 数据库：PostgreSQL 15
   - 缓存：Redis 7
   - 部署：Docker + Kubernetes
```

---

### 5. 引用具体内容

```
❌ "requirements.md 的那个场景有问题"
✅ "requirements.md 的 Scenario 2（密码找回）遗漏了邮箱验证步骤"

❌ "design 不合理"
✅ "design.md 第 45-60 行的 API 设计缺少错误处理"
```

---

## 📱 快捷短语

为常用操作定义简短别名：

```
状态 = 读取 STATUS.json 并报告
继续 = 从当前阶段继续
是 = 确认进入下一阶段
暂停 = 保存当前状态
回退 = 返回上一阶段
报告 = 生成进度报告
问题 = 报告阻塞项
```

---

## 🎭 角色扮演提示词

当你想要 AI 以特定视角审视工作时：

```
# 作为产品经理审查
用产品经理的视角审查 requirements.md

# 作为架构师审查
用架构师的视角审查 design.md，重点关注可扩展性

# 作为安全专家审查
用安全专家的视角审查设计，找出潜在漏洞

# 作为新人视角
假设你是新加入项目的开发者，plan.md 是否清晰？

# 作为 QA 视角
用 QA 的视角审查验收标准，是否有遗漏的边界情况？
```

---

## 🧠 元认知提示词

让 AI 反思自己的工作：

```
# 检查一致性
检查 requirements、design 和 plan 之间是否一致

# 识别风险
识别当前方案的主要风险

# 评估复杂度
评估这个功能的复杂度：简单/中等/复杂

# 预估时间
估算完成剩余工作需要多少时间

# 对比方案
design.md 中的方案 A 和方案 B，各有什么优劣？
```

---

## 📚 学习型提示词

用于理解和学习：

```
# 解释决策
解释为什么在 design.md 中选择 [技术 A] 而不是 [技术 B]

# 说明原理
说明步骤 [X.X] 的原理

# 对比差异
对比 [模块 A] 和 [模块 B] 的设计差异

# 总结模式
总结项目中常用的设计模式

# 推荐阅读
关于 [主题]，推荐我阅读哪些资料？
```

---

## 🎁 组合拳示例

实战中的多轮对话：

### 场景：启动新功能 → 完整交付

```
第 1 轮：
你: 我要添加用户评论功能

AI: [创建 STATUS.json，进入 PREWORK...]

---

第 2 轮：
你: 继续

AI: [进入 REQUIREMENTS，生成 requirements.md...]
    ✅ 是否进入 DESIGN 阶段？

---

第 3 轮：
你: 是，DESIGN 时注意：
    - 评论支持 Markdown
    - 需要防止 XSS

AI: [生成 design.md，包含安全措施...]
    ✅ 是否进入 PLAN 阶段？

---

第 4 轮：
你: 是，计划分 2 个批次：
    批次 1：后端 API
    批次 2：前端 UI

AI: [生成 plan.md，分批次...]
    ✅ 是否开始 IMPLEMENTATION？

---

第 5 轮：
你: 只执行批次 1

AI: [执行步骤 1.1 → 1.5...]
    ✅ 批次 1 完成

---

第 6 轮（第二天）：
你: 状态

AI: 📍 模块：user-comments
    🔄 当前阶段：IMPLEMENTATION
    ➡️ 下一步：执行批次 2

你: 继续

AI: [执行步骤 2.1 → 2.8...]
    ✅ IMPLEMENTATION 完成，是否进入 ACCEPTANCE？

---

第 7 轮：
你: 是

AI: [验证 requirements.md 的场景...]
    ✅ 所有场景通过
    🎉 功能已完成！
```

---

## 🔖 打印备忘单

```
┌─────────────────────────────────────────┐
│     SDD 提示词速查表                     │
├─────────────────────────────────────────┤
│ 查看状态       │ 状态                   │
│ 启动功能       │ 我要添加 [功能名]      │
│ 继续工作       │ 继续                   │
│ 下一阶段       │ 是                     │
│ 暂停保存       │ 暂停                   │
│ 报告问题       │ 步骤 X.X 失败了        │
│ 需求变更       │ 创建 Change Request    │
│ 回退阶段       │ 回退到 [阶段]          │
│ 切换模块       │ 切换到 [模块]          │
└─────────────────────────────────────────┘
```

---

## ✨ 结语

好的提示词 = **清晰的意图** + **足够的上下文** + **明确的边界**

记住：
- AI 会严格执行你的指令，所以请准确表达
- 不要省略关键信息，但也不要信息过载
- 遇到问题时，描述"是什么"而不是"应该怎么做"

---

**版本**: 1.0  
**最后更新**: 2025-12-18  
**配套文档**: QUICK-START.md

